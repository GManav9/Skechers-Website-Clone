<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="style.css" />

    <!-- Bootstarp CDN -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
      crossorigin="anonymous"
    ></script>

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <!-- Bootstarp CDN -->

    <!-- Google Font cdn -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Mulish:ital,wght@0,200..1000;1,200..1000&display=swap"
      rel="stylesheet"
    />
    <!-- Google Font cdn -->

    <!-- Font Awesome CDN -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
      integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <!-- Font Awesome CDN -->
  </head>
  <style>
    #price {
      width: 50%;
    }
    @media (max-width: 992px) {
      #price {
        width: 65%;
      }
    }
    @media (max-width: 576px) {
      #price {
        width: 60%;
      }
    }
    @media (max-width: 480px) {
      #price {
        width: 70%;
      }
    }
  </style>
  <body>
    <div class="subheader">
      <div class="row w-100">
        <div class="d-flex justify-content-end align-items-center">
          <div
            class="a1 d-flex justify-content-evenly align-items-center ms-2 me-4"
          >
            <a
              href="login.html"
              class="d-flex align-items-center text-decoration-none text-dark"
              ><img src="images/log-in (1).png" class="me-2" alt="" />Login /
              Signup</a
            >
          </div>
          <div
            class="a1 d-flex justify-content-evenly align-items-center ms-2 me-4"
          >
            <a
              href=""
              class="d-flex align-items-center text-decoration-none text-dark"
              ><img src="images/user (1).png" class="me-2" alt="" />My
              Account</a
            >
          </div>
          <div
            class="a1 d-flex justify-content-evenly align-items-center ms-2 me-4"
          >
            <a
              href=""
              class="d-flex align-items-center text-decoration-none text-dark"
              ><img src="images/track-order (1).png" class="me-2" alt="" />Track
              Order</a
            >
          </div>
          <div
            class="a1 d-flex justify-content-evenly align-items-center ms-2 me-4"
          >
            <a
              href=""
              class="d-flex align-items-center text-decoration-none text-dark"
              ><img src="images/map-pin (1).png" class="me-2" alt="" />Stores</a
            >
          </div>
          <div
            class="a1 d-flex justify-content-evenly align-items-center ms-2 me-4"
          >
            <a
              href=""
              class="d-flex align-items-center text-decoration-none text-dark"
              ><img
                src="images/help-circle (1).png"
                class="me-2"
                alt=""
              />Help</a
            >
          </div>
        </div>
      </div>
    </div>

    <nav class="navbar navbar-expand-xl">
      <div class="container-fluid">
        <a href="index.html" id="l">
          <img src="images/skechers-logo.png" class="img-fluid ms-3" alt="" />
        </a>

        <!-- <a class="navbar-brand" href="#">Navbar</a> -->
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <div
            class="fi d-flex flex-column flex-xl-row flex-lg-row justify-content-between align-xl-items-center align-items-start w-100 mt-xl-0 mt-4"
          >
            <ul
              class="navbar-nav m-xl-auto d-flex flex-column flex-lg-row justify-content-between align-xl-items-center align-items-start mb-2 mb-lg-0"
              id="nav"
            >
              <li class="nav-item">
                <a class="nav-link" href="women's.html">WOMEN</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="men's.html">MEN</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">KIDS</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">APPARELS</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">COLLECTION</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">SPORTS</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">SALE</a>
              </li>
            </ul>
            <div
              class="search d-flex justify-content-around align-xl-items-center align-items-start me-xl-3 mt-lg-1"
            >
              <form action="" class="position-relative">
                <input
                  type="text"
                  class="search-input w-100 pe-5"
                  placeholder="Search..."
                />
                <i class="fa-solid fa-magnifying-glass position-absolute"></i>
              </form>
              <div>
                <a href="cart.html">
                  <i class="bi fs-4 bi-bag-check"></i>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </nav>

    <div class="sp d-flex justify-content-center row w-100 m-0 my-4">
      <div class="col-12 col-md-6 col-lg-6 border border-1 border-dark">
        <table class="table table-responsive">
          <!-- Cart items will be injected here -->
        </table>
      </div>
      <div class="col-12 col-md-6 col-lg-5 p-2 border border-1 border-dark">
        <h1 class="fs-5">PRICE DETAILS</h1>
        <hr />
        <div class="d-flex justify-content-between align-items-center">
          <p class="m-0 fw-bold">Total Cart MRP Value</p>
          <p class="m-0 fw-bold" id="tot-price">&#8377;7,499.00</p>
        </div>
        <div class="d-flex mt-2 justify-content-between align-items-center">
          <p class="m-0 fw-bold">Shipping</p>
          <p class="m-0 fw-bold">FREE</p>
        </div>
        <div class="d-flex mt-2 justify-content-between align-items-center">
          <p class="m-0 fw-bold">Discount</p>
          <p class="m-0 fw-bold">-&#8377;0.00</p>
        </div>
        <div class="mt-3 mb-3" style="border: 1px dashed #0063ba"></div>
        <div class="d-flex mt-2 justify-content-between align-items-center">
          <p class="m-0 fs-5 fw-bold">Grand Total</p>
          <p class="m-0 fs-5 fw-bold" id="tot-price1">&#8377;7,499.00</p>
        </div>
        <p class="m-0">All prices are including tax <sup>*</sup></p>
        <div class="d-flex mt-3 justify-content-between align-items-center">
          <button
            class="btn text-white"
            style="background-color: #0063ba; width: 47%"
          >
            CHECKOUT
          </button>
          <a href="index.html" style="width: 47%">
            <button
              class="btn"
              style="border-color: #0063ba; color: #0063ba; width: 100%"
            >
              CONTINUE SHOPPING
            </button>
          </a>
        </div>
      </div>
    </div>

    <footer
      class="d-flex justify-content-center align-items-center flex-column"
    >
      <div class="row mt-5 mb-5">
        <div class="col-xl-2">
          <img
            id="footer_logo"
            src="https://www.skechers.in/on/demandware.static/Sites-skechersin-Site/-/default/dwf7c9b9bb/images/skechers-logo.png"
            class="img-fluid"
            alt=""
          />
        </div>
      </div>
      <div class="row mb-5 d-flex justify-content-start">
        <div class="col-xl-8 col-12 d-flex justify-content-evenly">
          <div class="row w-100 d-flex justify-xl-content-between">
            <div class="col-xl-3 col-6 col-sm-6 col-md-6 col-lg-3 mt-5 mt-xl-0">
              <h6 style="font-weight: bold; font-size: 17px">About Skechers</h6>
              <div class="mt-3 d-flex flex-column">
                <a href="" class="mt-2">Corporate Info</a>
                <a href="" class="mt-2">Corporate Governance</a>
              </div>
            </div>
            <div class="col-xl-3 col-6 col-sm-6 col-md-6 col-lg-3 mt-5 mt-xl-0">
              <h6 style="font-weight: bold; font-size: 17px">
                Customer Service
              </h6>
              <div class="mt-3 d-flex flex-column">
                <a href="" class="mt-2">Return Policy</a>
                <a href="" class="mt-2">Product Information</a>
                <a href="" class="mt-2">Contact Us</a>
                <a href="" class="mt-2">Sitemap</a>
              </div>
            </div>
            <div class="col-xl-3 col-6 col-sm-6 col-md-6 col-lg-3 mt-5 mt-xl-0">
              <h6 style="font-weight: bold; font-size: 17px">My Account</h6>
              <div class="mt-3 d-flex flex-column">
                <a href="" class="mt-2">Order Status</a>
                <a href="" class="mt-2">Saved Products</a>
                <a href="" class="mt-2">My Returns</a>
              </div>
            </div>
            <div class="col-xl-3 col-6 col-sm-6 col-md-6 col-lg-3 mt-5 mt-xl-0">
              <h6 style="font-weight: bold; font-size: 17px">Others</h6>
              <div class="mt-3 d-flex flex-column">
                <a href="" class="mt-2">FAQ</a>
                <a href="" class="mt-2">Terms & Condition</a>
                <a href="" class="mt-2">Privacy Policy</a>
                <a href="" class="mt-2">Find A Store</a>
              </div>
            </div>
          </div>
        </div>
        <div
          id="icons"
          class="col-xl-4 col-12 col-lg-4 mt-xl-0 mt-3"
          style="height: 100px"
        >
          <h6 style="font-weight: bold; font-size: 17px">Follow Us</h6>
          <div
            class="icons d-flex justify-content-between mt-3 align-items-center"
          >
            <i style="cursor: pointer" class="fa-brands fa-facebook-f"></i>
            <i style="cursor: pointer" class="fa-brands fa-twitter"></i>
            <i style="cursor: pointer" class="fa-brands fa-instagram"></i>
            <i style="cursor: pointer" class="fa-brands fa-youtube"></i>
          </div>
        </div>
      </div>
    </footer>
  </body>
  <script>
    // Fetch and update the cart on page load
    fetch(`https://mock-server-app-snv6.onrender.com/carts`)
      .then((res) => res.json())
      .then((res) => {
        document.querySelector("table").innerHTML = getData(res);
        document.querySelector("#tot-price").innerHTML =
          "&#8377;" + cal(res) + ".00";
        document.querySelector("#tot-price1").innerHTML =
          "&#8377;" + cal(res) + ".00";
      })
      .catch((err) => {
        console.log(err);
      });

    // Function to delete an item from the cart
    function deleteItem(id) {
      // Send DELETE request to remove the item from the backend
      fetch(`https://mock-server-app-snv6.onrender.com/carts${id}`, {
        method: "DELETE",
      })
        .then((res) => res.json())
        .then(() => {
          // After deleting, fetch the updated cart and recalculate the prices
          fetch(`https://mock-server-app-snv6.onrender.com/carts`)
            .then((res) => res.json())
            .then((res) => {
              document.querySelector("table").innerHTML = getData(res);
              document.querySelector("#tot-price").innerHTML =
                "&#8377;" + cal(res) + ".00";
              document.querySelector("#tot-price1").innerHTML =
                "&#8377;" + cal(res) + ".00";
            })
            .catch((err) => {
              console.log(err);
            });
        })
        .catch((err) => {
          console.log("Error deleting item:", err);
        });
    }

    // Function to generate HTML for cart items
    function getData(res) {
      return res
        .map((el) => {
          return `
        <tr class="w-100"><td class="my-4 d-flex gap-4">
        <img src="${el.image}" style="width: 150px; height: 150px;" alt="">
        <div class="" id="price">
            <p class="m-0">${el.categorie}</p>
            <h1 class="fs-5 m-0 mt-2 fw-bold" style="color: #0063ba;">${el.title}</h1>
            <p class="m-0 mt-4"><span class="fw-bold">Style:</span> # 17710-NTCL</p>
            <p class="m-0"><span class="fw-bold">Color:</span> NATURAL/CORAL</p>
            <p class="m-0"><span class="fw-bold">Size:</span> 8</p>
            <p class="m-0 mt-3">In Stock</p>
            <div class="mt-2 d-flex align-items-center justify-content-between">
                <input type="number" class="text-center" value="1" style="width: 50px;">
                <p class="m-0 fw-bold fs-5">&#8377;${el.price}.00</p>
                <!-- Delete Button -->
                <button class="btn btn-danger btn-sm" onclick="deleteItem(${el.id})">Delete</button>
            </div>
        </div>
        </td></tr>
        `;
        })
        .join("");
    }

    // Function to calculate the total price
    function cal(res) {
      let tot_price = 0;

      res.map((el) => {
        tot_price += el.price;
      });

      return tot_price;
    }
  </script>
</html>
